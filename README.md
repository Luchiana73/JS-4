#Создание проекта и запуск тестов с помощью фреймворка JEST
###Установка и настройка проекта
Прежде чем создать проект, нужно инициализировать его в текущей папке. Для этого в **VSCode** нужно открыть папку, в которой хотим создать проект и в терминале выполнить команду

```bash
npm init
```

Ввести название проекта, версию, описание и т. д., или просто нажимать _Enter_ до тех пор, пока не будет создан файл _package.json_, который определяет настройки проекта.
Чтобы не нажимать _Enter_, пропуская пустые поля, можно инициализировать проект с помощью команды

```bash
nmp init -y
```

В этом случае файл _package.json_ создастся автоматически со значениями по умолчанию, его можно будет редактировать и дополнять позже вручную.

Для того, чтобы установить тестовый фреймворк **Jest** в терминале нужно выполнить команду

```bash
npm install --save-dev jest
```

Эта команда подгрузит зависимость библиотеки **Jest** в файл _package.json_, должна появиться вот такая запись.

```javascript
 "devDependencies": {
    "jest": "^29.7.0"
  }
```

В файле _package.json_ в разделе _scripts_ заменяем значение по умолчанию на "jest".
Должно получиться

```javascript
 "scripts": {
    "test": "jest"
  },
```

Эта команда будет запускать тесты.

###Создание и запуск тестов

Для написания тестов нужно создать отдельный файл с расширением `test.js` или `spec.js`.
Для того, чтобы связать этот файл с функцией, которую нужно протестировать, в файле с функцией создаём экспорт функции

```bash
module.exports = <название функции>
```

А в файле с тестами прописываем

```bash
const <название функции> = require('./относительный путь к файлу с функцией')
```

Таким образом связываем два файла: файл с функцией и файл с тестами между собой.

После написания всех тестов запускаем их, используя команду в терминале

```bash
npx jest
```

или

```bash
npm run test
```

###Измерение покрытия кода тестами

Для начала нам нужно установить **Babel plugin** с помощью команды

```bash
npm install --save-dev babel-plugin-istanbul
```

После установки плагина в файле _package.json_ добавится новая зависимость

```javascript
"devdependencies": {
  "babel-plugin-istanbul":"^6.1.1", ;
}
```

Для запуска тестов выполняем команду

```bash
npx jest --coverage
```

После выполнения этой команды в терминале будет выведена информация с результом выполнения тестов и сводная таблица покрытия кода тестами по каждому файлу

|      File | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s |
| --------: | ------: | -------: | ------: | ------: | ----------------- |
| All files |     100 |      100 |     100 |     100 |
|  bonus.js |     100 |      100 |     100 |     100 |

При этом в директории проекта формируется папка _coverage_. Чтобы посмотреть детальную информацию, в этой папке нужно найти файл _index.html_ и открыть его с помощью Live Server

![](/img/Screenshot.png)

И уже там можно посмотреть более подробный отчёт отдельно по покрытию тестами каждой функции, ветки и строки кода

![](/img/Report.png)

![](/img/Report_compl.png)

**_Покрытие функции_**
позволяет оценить, какой процент функций и методов всего кода был протестирован.
**_Покрытие веток_**
оценивает тестирование разных сценариев выполнения кода, таких как `if..else`, `switch`, тернарный оператор и т.д.
**_Покрытие строк кода_**
оценивает процент строк кода, которые были покрыты тестами;
есть строки, которые не надо тестировать, например комментарии, объявление переменных.
